<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Server list minecraft</title>
  <style>
    body {
      background-color: #2a2a2a;
      color: #ffffff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }

    input {
      padding: 10px;
      margin-bottom: 20px;
      width: 300px;
      border-radius: 4px;
      border: 1px solid #666;
      background-color: #3a3a3a;
      color: #ffffff;
    }

    .server {
      background: #3a3a3a;
      border: 1px solid #555;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
    }

    button {
      background-color: #444;
      color: white;
      border: none;
      padding: 6px 12px;
      margin-top: 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #666;
    }

    .info-button {
      background-color: #666;
      margin-left: 10px;
      padding: 4px 8px;
    }

    .info-text {
      background-color: #1e1e1e;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
      display: none;
      font-size: 14px;
      color: #ddd;
    }

    i {
      color: #bbbbbb;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>Server's minecraft</h1>

  <input type="text" id="search" placeholder="Поиск по IP или MOTD...">
  <div id="server-list">Loading...</div>

  <script>
    let serverData = {};

    function renderServers(filter = '') {
      const list = document.getElementById('server-list');
      list.innerHTML = '';

      const lowerFilter = filter.toLowerCase();

      for (const ip in serverData) {
        const server = serverData[ip];
        const combinedText = ip + ' ' + server.motd;
        if (!combinedText.toLowerCase().includes(lowerFilter)) continue;

        const div = document.createElement('div');
        div.className = 'server';
        div.innerHTML = `
          <div><strong>IP:</strong> ${ip}</div>
          <div><strong>Version:</strong> ${server.version}</div>
          <div><strong>Player's:</strong> ${server.players}
            <button class="info-button" onclick="toggleInfo(this)">?</button>
            <div class="info-text">
              Online may change from current to what it was during the search!.
            </div>
          </div>
          <div><strong>MOTD:</strong> ${server.motd}</div>
          <button onclick="navigator.clipboard.writeText('${ip}')">Скопировать IP</button>
        `;
        list.appendChild(div);
      }

      if (list.innerHTML === '') {
        list.innerHTML = '<i>Nothing found.</i>';
      }
    }

    function toggleInfo(button) {
      const infoText = button.nextElementSibling;
      infoText.style.display = (infoText.style.display === 'block') ? 'none' : 'block';
    }

    fetch('servers.json')
      .then(response => response.json())
      .then(data => {
        serverData = data;
        renderServers();
      })
      .catch(error => {
        document.getElementById('server-list').innerText = 'Ошибка загрузки данных.';
        console.error(error);
      });

    document.getElementById('search').addEventListener('input', (e) => {
      renderServers(e.target.value);
    });
  </script>
</body>
</html>
